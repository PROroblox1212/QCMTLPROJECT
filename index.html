<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ERLC — Panel Modération</title>
  <style>
    :root{
      --bg:#0b1220; --card:#11182a; --muted:#97a3b6; --text:#eef2ff; --accent:#5b9dff;
      --yellow:#fde047; --orange:#fb923c; --red:#ef4444; --black:#0b0b0b; --white:#f3f4f6;
      --ok:#22c55e; --warn:#f59e0b; --ring:rgba(91,157,255,.25);
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1220,#0a1224 40%,#08101f);color:var(--text);font:18px/1.5 system-ui,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif}
    header{padding:28px 16px 0;display:flex;align-items:center;justify-content:center}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    h1{font-size:32px;margin:0 0 4px;letter-spacing:.2px}
    .sub{color:var(--muted);font-size:15px}

    .top{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin:18px 0}
    select, input[type="text"]{background:#0f1629;color:var(--text);border:1px solid #1c2742;border-radius:12px;padding:12px 14px;outline:none;font-size:16px}
    select:focus, input:focus{box-shadow:0 0 0 4px var(--ring)}
    .pill{background:#0f1629;border:1px solid #1c2742;border-radius:999px;padding:10px 14px;display:inline-flex;gap:8px;align-items:center;font-size:16px}
    
    .tabs{display:flex;gap:12px;margin:10px 0 18px}
    .tab{flex:1;background:#0f1629;border:1px solid #1c2742;border-radius:14px;padding:16px 20px;text-align:center;cursor:pointer;font-weight:700;letter-spacing:.5px;transition:transform .06s ease;font-size:18px}
    .tab:hover{transform:translateY(-1px)}
    .tab.active{background:#152246;border-color:#2a416f;box-shadow:0 6px 24px rgba(0,0,0,.25), inset 0 0 0 1px #355492}

    
    .zone{background:var(--card);border:1px solid #1b243b;border-radius:16px;padding:16px 16px 12px;margin:12px 0}
    .zonehead{display:flex;align-items:center;gap:10px;margin-bottom:12px;font-size:18px}
    .badge{font-weight:800;border-radius:10px;padding:8px 12px;color:#0b1020;font-size:15px}
    .y{background:var(--yellow)} .o{background:var(--orange);color:#140a00} .r{background:var(--red);color:#1b0000}
    .k{background:#222;color:#fafafa;border:1px solid #444}
    .w{background:var(--white);color:#0b0f1a;border:1px solid #d1d5db}
    .need{font-size:14px;color:var(--muted)}

    
    .reasons{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .reason{background:#12203b;border:1px solid #1f2d51;border-radius:12px;padding:12px 14px;text-align:left;cursor:pointer;font-size:17px;display:flex;flex-direction:column;align-items:flex-start}
    .reason small{display:block;color:var(--muted);margin-top:8px;font-size:13px}
    .reason[disabled]{opacity:.45;cursor:not-allowed;filter:grayscale(20%)}
    .reason.active{border-color:var(--accent);background:#163152}

    
    .controls{display:flex;gap:12px;align-items:center;flex-wrap:wrap;margin-top:12px}
    .basket{background:#071126;border:1px solid #203a57;border-radius:12px;padding:10px 12px;font-size:16px;min-width:260px}
    .smallbtn{background:#1b2c4f;color:#e8f0ff;border:1px solid #2b4473;border-radius:10px;padding:8px 12px;cursor:pointer;font-size:14px}

    
    .guide{margin-top:10px;background:#0f1629;border:1px dashed #263152;border-radius:14px;padding:14px 16px;color:#cfe0ff;font-size:16px}
    .composer{margin:16px 0 6px;display:flex;gap:8px;flex-wrap:wrap}
    textarea{width:100%;min-height:100px;background:#0f1629;color:var(--text);border:1px solid #1c2742;border-radius:12px;padding:12px 14px;font-size:16px}
    .btn{background:#1b2c4f;color:#e8f0ff;border:1px solid #2b4473;border-radius:12px;padding:12px 16px;cursor:pointer;font-size:16px}

    
    .toast{position:fixed;inset:auto 16px 16px auto;background:#0f1629;color:#e5f0ff;border:1px solid #274177;border-radius:12px;padding:12px 16px;box-shadow:0 10px 28px rgba(0,0,0,.35);opacity:0;transform:translateY(8px);transition:all .2s;font-size:16px}
    .toast.show{opacity:1;transform:none}

    
    .flex{display:flex;gap:12px;align-items:center}
  </style>
</head>
<body>
  <header>
    <div class="wrap" style="text-align:center">
      <h1>📗 ERLC — Panel de Modération</h1>
      <div class="sub">Warn • Kick • Ban — Sélection multiple + corrections notes</div>
    </div>
  </header>

  <main class="wrap">
    
    <div class="top">
      <label class="pill" title="Grade courant">
        <span>🎚️ Grade</span>
        <select id="role">
          <option>Modérateur junior</option>
          <option>Modérateur</option>
          <option selected>Administrateur+</option>
          <option>Co-fondateur+</option>
        </select>
      </label>

      <label class="pill" title="Filtrer par texte">
        <span>🔎 Rechercher</span>
        <input id="search" type="text" placeholder="ex: RDM, exploit, métagaming..." />
      </label>

      <div style="margin-left:auto" class="flex">
        <div class="pill">🧩 Procédure !mod: Rejoindre • Écouter • Vérifier • Évaluer • Sanctionner • Noter → Melonly</div>
      </div>
    </div>

    
    <div class="tabs">
      <div class="tab active" data-tab="WARN">WARN</div>
      <div class="tab" data-tab="KICK">KICK</div>
      <div class="tab" data-tab="BAN">BAN</div>
    </div>

    
    <div id="zones"></div>

    
    <div class="controls" style="margin-top:8px">
      <div id="basket" class="basket">Aucune sélection</div>
      <button id="copyBasket" class="smallbtn">📋 Copier sélection</button>
      <button id="clearBasket" class="smallbtn">🗑️ Vider sélection</button>
      <div style="margin-left:auto" class="flex">
        <button id="copyAll" class="btn">✅ Copier (règles + notes)</button>
      </div>
    </div>

    
    <div class="guide" style="margin-top:16px">
      <b>Rappel zones :</b> 🟡 2–4 warns | 🟠 warn/kick | 🔴 kick/ban (Admin+) | ⚫ ban/blacklist (Co-fondateur+). Cas particulier : <b>:wanted</b>
    </div>

    <div class="composer">
      <textarea id="note" placeholder="Notes (preuve, ID, contexte, durée, etc.)"></textarea>
      <button class="btn" id="copyNote">Copier la note</button>
    </div>
  </main>

  <div id="toast" class="toast">Copié ✅</div>

  <script>
    const RULES = [

      {label:"Crime en safezone (spawns, postes, casernes)", zone:"🔴"},
      {label:"Zones intérieures police sans escorte", zone:"🟠"},
      {label:"Zones intérieures casernes réservées (pompiers)", zone:"🟠"},
      {label:"Auto-défense HRP sans prévenir mod (usage abusif)", zone:"🟡"},
      {label:"Voiding sans accord", zone:"🟠"},
      {label:"Crash RP sans accord (refus)", zone:"🟡"},

      
      {label:"Fuite sans raison RP sérieuse", zone:"🟠"},
      {label:"Conduite irréaliste (jumps, sens inverse)", zone:"🟠"},
      {label:"Crashs non joués (NoPain)", zone:"🟡"},
      {label:"Abus de fréquence radio", zone:"🟡"},
      {label:"Rassemblements HRP", zone:"🟠"},
      {label:"Scène prioritaire sans mod", zone:"🟡"},
      {label:"Véhicule exotique sans WL", zone:"🟠"},
      {label:"Liveries non respectées", zone:"🟡"},
      {label:"Refus de RP sans raison valide", zone:"🟠"},
      {label:"Troll / NITRP", zone:"🟠"},
      {label:"Interférence de scène RP/staff", zone:"🟡"},
      {label:"Metagaming (info hors RP)", zone:"🟠"},
      {label:"Corruption RP (police, pompier, paramédic, MTQ)", zone:"🟠"},
      {label:"Avatar irréaliste (costumes/têtes/peau)", zone:"🟠"},
      {label:"GTA driving (aucune règle de la route)", zone:"🟠"},
      {label:"Bloquer la route sans raison métier", zone:"🟠"},
      {label:"MTQ: ne pas laisser 1 voie par côté", zone:"🟠"},

      
      {label:"Abus d'outils (cones, stopsticks, taser...)", zone:"🟠"},
      {label:"Arme incohérente avec rôle", zone:"🟡"},
      {label:"Gun motions", zone:"🟡"},
      {label:"Cuff motions (utilisation correcte)", zone:"🟡"},
      {label:"Cuff rush (interdit si pas de raison/armé/mobilité)", zone:"🟠"},

      
      {label:"RDM (attaque sans avertissement)", zone:"🟠"},
      {label:"RDM en safezone (instant ban)", zone:"🔴"},
      {label:"RDM sur staff (instant ban)", zone:"🔴"},
      {label:"VDM (heurter exprès avec véhicule)", zone:"🟠"},
      {label:"FRP (irréalisme)", zone:"🟠"},
      {label:"Powergaming/FearRP/NoPain", zone:"🟠"},
      {label:"Car surfing (sauter sur véhicule)", zone:"🟠"},
      {label:"NLR (retour sur scène après mort)", zone:"🟠"},
      {label:"Partenaires de crime >2 sans permission gang", zone:"🟠"},

      
      {label:"Gang/Entreprise sans autorisation", zone:"🟠"},
      {label:"TOS Roblox (contenu NSFW/choquant)", zone:"🟠"},
      {label:"Combat log (quitter pour éviter scène)", zone:"🟠"},
      {label:"Fausse identité (uniforme/véhicule non autorisé)", zone:"🟠"},
      {label:"Impersonation staff", zone:"🔴"},
      {label:"Évasion staff (quitter pour éviter sanction)", zone:"🔴"},
      {label:"Évasion de ban (alt)", zone:"⚫"},
      {label:"Menaces serveur/joueur (DDoS, Dox, pub malveillante)", zone:"⚫"},
      {label:"Abus staff (signaler via ticket)", zone:"🟡"},
      {label:"Musique / soundboard / voice changer sans autorisation", zone:"🟡"},
      {label:"Appel mod inutile", zone:"🟡"},

      
      {label:"Refuser décisions du staff", zone:"🟠"},
      {label:"Manque de respect / harcèlement", zone:"🔴"},
      {label:"Spam / ping / pub sans autorisation", zone:"🟠"},
      {label:"Contenu NSFW ou choquant", zone:"🟠"},
      {label:"Débats HRP", zone:"🟡"},
      {label:"Abus bots / tickets", zone:"🟠"},
      {label:"Usurpation / double compte", zone:"🟠"},
      {label:"DM non sollicités", zone:"🟠"},
      {label:"Mauvais salons (mauvaise section)", zone:"🟡"},
      {label:"Partage privé sans accord", zone:"🔴"},
      {label:"Contournement sanction", zone:"🔴"},

      
      {label:"GTA driving", zone:"🟠"},
      {label:"Cuff Rush", zone:"🟠"},
      {label:"RDM staff", zone:"🔴"}
    ];

    const ZONE_INFO = {
      "🟡": {name:"Zone jaune – Mineure", cls:"y", hint:"2–4 warns"},
      "🟠": {name:"Zone orange – Moyenne", cls:"o", hint:"warn ou kick"},
      "🔴": {name:"Zone rouge – Grave", cls:"r", hint:"kick ou ban (Admin+)"},
      "⚫": {name:"Zone noire – Très grave", cls:"k", hint:"ban ou blacklist (Co-fondateur+)"}
    };

    const ACTIONS = {WARN:["🟡","🟠","🔴"], KICK:["🟠","🔴"], BAN:["🔴","⚫"]};
    const roleOrder = ["Modérateur junior","Modérateur","Administrateur+","Co-fondateur+"];
    const zoneRequirements = {"🟡":"Modérateur junior","🟠":"Modérateur junior","🔴":"Administrateur+","⚫":"Co-fondateur+"};

    
    const roleSel = document.getElementById('role');
    const search = document.getElementById('search');
    const zonesHost = document.getElementById('zones');
    const tabs = [...document.querySelectorAll('.tab')];
    const toast = document.getElementById('toast');
    const basketEl = document.getElementById('basket');

    let currentAction = 'WARN';
    let basket = []; 

    
    tabs.forEach(t=>{
      t.addEventListener('click', ()=>{
        tabs.forEach(x=>x.classList.remove('active'));
        t.classList.add('active');
        currentAction = t.dataset.tab;
        render();
      });
    });

    roleSel.addEventListener('change', render);
    search.addEventListener('input', render);

    
    document.getElementById('copyNote').addEventListener('click', ()=>{
      const txt = document.getElementById('note').value.trim();
      if(!txt) return pop("Rien à copier");
      const fixed = fixNotes(txt);
      copyToClipboard(fixed);
    });

    
    document.getElementById('copyBasket').addEventListener('click', ()=>{
      if(basket.length===0) return pop("Aucune sélection");
      const text = basket.join(" I ");
      copyToClipboard(text);
    });

    
    document.getElementById('clearBasket').addEventListener('click', ()=>{
      basket = [];
      updateBasket();
      
      document.querySelectorAll('.reason').forEach(btn => btn.classList.remove('active'));
      pop("Sélection vidée");
    });

    
    document.getElementById('copyAll').addEventListener('click', ()=>{
      const selected = basket.slice();
      const notesRaw = document.getElementById('note').value.trim();
      const notesFixed = notesRaw ? fixNotes(notesRaw) : '';
      const action = currentAction.toUpperCase();
      const reasonsPart = selected.length ? selected.join(" I ") : "Aucune raison sélectionnée";
      const final = action + " | " + reasonsPart + (notesFixed ? " — Notes: " + notesFixed : "");
      copyToClipboard(final);
    });

    
    function isAllowed(zone, role){
      const need = zoneRequirements[zone];
      return roleOrder.indexOf(role) >= roleOrder.indexOf(need);
    }

    
    function render(){
      const role = roleSel.value;
      const q = search.value.toLowerCase();
      zonesHost.innerHTML = '';
      const zonesToShow = ACTIONS[currentAction];

      zonesToShow.forEach(z => {
        const info = ZONE_INFO[z];
        const sec = document.createElement('section'); sec.className = 'zone';

        
        const head = document.createElement('div'); head.className = 'zonehead';
        const badge = document.createElement('span'); badge.className = 'badge '+info.cls; badge.textContent = z;
        const title = document.createElement('div'); title.innerHTML = `<b>${info.name}</b> · <span class="need">${info.hint}</span>`;
        head.appendChild(badge); head.appendChild(title);
        sec.appendChild(head);

        
        const grid = document.createElement('div'); grid.className = 'reasons';

        RULES.filter(r => r.zone === z && (!q || r.label.toLowerCase().includes(q)))
             .forEach(r => {
               const btn = document.createElement('button');
               btn.className = 'reason';
               const allowed = isAllowed(r.zone, role);
               btn.disabled = !allowed;
               const isSelected = basket.includes(r.label);
               if(isSelected) btn.classList.add('active');

               btn.innerHTML = `<div style="font-weight:600">${r.label}</div><small>${allowed? 'Cliquer pour ajouter/supprimer' : 'Réservé pour grade supérieur'}</small>`;

               btn.addEventListener('click', ()=>{
                 if(!allowed) return;
                 
                 if(basket.includes(r.label)){
                   basket = basket.filter(x=>x!==r.label);
                   btn.classList.remove('active');
                 } else {
                   basket.push(r.label);
                   btn.classList.add('active');
                 }
                 updateBasket();
               });

               grid.appendChild(btn);
             });

        sec.appendChild(grid);
        zonesHost.appendChild(sec);
      });

      
      if(currentAction === 'WARN'){
        const special = document.createElement('section'); special.className = 'zone';
        special.innerHTML = `
          <div class="zonehead"><span class="badge w">⚪</span>
          <div><b>Cas particulier</b> · <span class="need">Un supérieur veut retirer un joueur d’une team → <b>:wanted</b></span></div></div>
          <div class="reasons">
            <button class="reason" id="wantedBtn">Insérer ":wanted" <small>Cliquer pour ajouter/supprimer</small></button>
          </div>`;
        zonesHost.appendChild(special);
        
        special.querySelector('#wantedBtn').addEventListener('click', (e)=>{
          const label = ':wanted';
          const btn = e.currentTarget;
          if(basket.includes(label)){ basket = basket.filter(x=>x!==label); btn.classList.remove('active'); }
          else { basket.push(label); btn.classList.add('active'); }
          updateBasket();
        });
      }
      updateBasket();
    }

    // Update basket element
    function updateBasket(){
      basketEl.textContent = basket.length ? basket.join(" I ") : "Aucune sélection";
    }

    
    function fixNotes(text){
      text = text.replace(/\s+/g, ' ').trim();                       
      text = text.replace(/\s+([?.!,;:])/g, '$1');                    
      text = text.replace(/(^\s*\w|[.!?]\s*\w)/g, c => c.toUpperCase());
      return text;
    }

    function copyToClipboard(text){
      navigator.clipboard.writeText(text).then(()=>pop("Copié dans le presse-papier ✅"))
                                       .catch(()=>pop("Impossible de copier — vérifie le navigateur"));
    }
    function pop(msg){
      toast.textContent = msg; toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'),1500);
    }

    render();
  </script>
</body>
</html>
