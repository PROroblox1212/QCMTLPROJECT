<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ERLC — Panel Modération</title>
  <style>
    :root{
      --bg:#0b1220; --card:#11182a; --muted:#97a3b6; --text:#eef2ff; --accent:#5b9dff;
      --yellow:#fde047; --orange:#fb923c; --red:#ef4444; --black:#0b0b0b; --white:#f3f4f6;
      --ok:#22c55e; --warn:#f59e0b; --ring:rgba(91,157,255,.25);
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,#0b1220,#0a1224 40%,#08101f);color:var(--text);font:18px/1.5 system-ui,Segoe UI,Roboto,Ubuntu,Inter,Arial,sans-serif}
    header{padding:28px 16px 0;display:flex;align-items:center;justify-content:center}
    .wrap{max-width:1100px;margin:0 auto;padding:16px}
    h1{font-size:32px;margin:0 0 4px;letter-spacing:.2px}
    .sub{color:var(--muted);font-size:15px}

    /* top controls */
    .top{display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin:18px 0}
    select, input[type="text"]{background:#0f1629;color:var(--text);border:1px solid #1c2742;border-radius:12px;padding:12px 14px;outline:none;font-size:16px}
    select:focus, input:focus{box-shadow:0 0 0 4px var(--ring)}
    .pill{background:#0f1629;border:1px solid #1c2742;border-radius:999px;padding:10px 14px;display:inline-flex;gap:8px;align-items:center;font-size:16px}

    /* action tabs */
    .tabs{display:flex;gap:12px;margin:10px 0 18px}
    .tab{flex:1;background:#0f1629;border:1px solid #1c2742;border-radius:14px;padding:16px 20px;text-align:center;cursor:pointer;font-weight:700;letter-spacing:.5px;transition:transform .06s ease;font-size:18px}
    .tab:hover{transform:translateY(-1px)}
    .tab.active{background:#152246;border-color:#2a416f;box-shadow:0 6px 24px rgba(0,0,0,.25), inset 0 0 0 1px #355492}

    /* zones */
    .zone{background:var(--card);border:1px solid #1b243b;border-radius:16px;padding:16px 16px 12px;margin:12px 0}
    .zonehead{display:flex;align-items:center;gap:10px;margin-bottom:12px;font-size:18px}
    .badge{font-weight:800;border-radius:10px;padding:8px 12px;color:#0b1020;font-size:15px}
    .y{background:var(--yellow)} .o{background:var(--orange);color:#140a00} .r{background:var(--red);color:#1b0000}
    .k{background:#222;color:#fafafa;border:1px solid #444}
    .w{background:var(--white);color:#0b0f1a;border:1px solid #d1d5db}
    .need{font-size:14px;color:var(--muted)}

    /* reason buttons */
    .reasons{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px}
    .reason{background:#12203b;border:1px solid #1f2d51;border-radius:12px;padding:12px 14px;text-align:left;cursor:pointer;font-size:17px}
    .reason small{display:block;color:var(--muted);margin-top:6px;font-size:15px}
    .reason[disabled]{opacity:.45;cursor:not-allowed;filter:grayscale(20%)}

    /* toast */
    .toast{position:fixed;inset:auto 16px 16px auto;background:#0f1629;color:#e5f0ff;border:1px solid #274177;border-radius:12px;padding:12px 16px;box-shadow:0 10px 28px rgba(0,0,0,.35);opacity:0;transform:translateY(8px);transition:all .2s;font-size:16px}
    .toast.show{opacity:1;transform:none}

    /* guide card */
    .guide{margin-top:10px;background:#0f1629;border:1px dashed #263152;border-radius:14px;padding:14px 16px;color:#cfe0ff;font-size:16px}
    .guide b{color:#fff}

    /* composer */
    .composer{margin:16px 0 6px;display:flex;gap:8px;flex-wrap:wrap}
    textarea{width:100%;min-height:100px;background:#0f1629;color:var(--text);border:1px solid #1c2742;border-radius:12px;padding:12px 14px;font-size:16px}
    .btn{background:#1b2c4f;color:#e8f0ff;border:1px solid #2b4473;border-radius:12px;padding:12px 16px;cursor:pointer;font-size:16px}
  </style>
</head>
<body>
  <header>
    <div class="wrap" style="text-align:center">
      <h1>📗 ERLC — Panel de Modération</h1>
      <div class="sub">Warn • Kick • Ban — Copie instantanée des raisons | Zones & permissions intégrées</div>
    </div>
  </header>

  <main class="wrap">
    <!-- Top controls -->
    <div class="top">
      <label class="pill" title="Grade courant">
        <span>🎚️ Grade</span>
        <select id="role">
          <option>Modérateur junior</option>
          <option>Modérateur</option>
          <option selected>Administrateur+</option>
          <option>Co-fondateur+</option>
        </select>
      </label>
      <label class="pill" title="Filtrer par texte">
        <span>🔎 Rechercher</span>
        <input id="search" type="text" placeholder="ex: RDM, exploit, métagaming..." />
      </label>
      <span class="pill" title="Procédure !mod">🧩 Procédure rapide !mod: Rejoindre, écouter, vérifier, évaluer, sanctionner, noter → Melonly</span>
    </div>

    <!-- Action tabs -->
    <div class="tabs">
      <div class="tab active" data-tab="WARN">WARN</div>
      <div class="tab" data-tab="KICK">KICK</div>
      <div class="tab" data-tab="BAN">BAN</div>
    </div>

    <!-- Zones injected here -->
    <div id="zones"></div>

    <!-- Composer -->
    <div class="guide">
      <b>Rappel zones :</b> 🟡 2–4 warns | 🟠 warn/kick | 🔴 kick/ban (Admin+) | ⚫ ban/blacklist (Co-fondateur+). Cas particulier : <b>:wanted</b> si retrait d’une team par un supérieur.
    </div>

    <div class="composer">
      <textarea id="note" placeholder="Notes (preuve, ID, contexte, durée, etc.)"></textarea>
      <button class="btn" id="copyNote">Copier la note</button>
    </div>
  </main>

  <div id="toast" class="toast">Copié ✅</div>

  <script>
    // ---------- Permissions par zone
    const roleOrder = ["Modérateur junior","Modérateur","Administrateur+","Co-fondateur+"];
    const zoneRequirements = {
      "🟡": "Modérateur junior",
      "🟠": "Modérateur junior",
      "🔴": "Administrateur+",
      "⚫": "Co-fondateur+"
    };

    // ---------- Données des raisons
    const RULES = [
      {label:"Crime en safezone (spawns/postes/casernes)", zone:"🔴"},
      {label:"Accès zones intérieures police sans escorte", zone:"🟠"},
      {label:"Accès zones intérieures casernes sans droit", zone:"🟠"},
      {label:"Auto-défense HRP (usage abusif)", zone:"🟡"},
      {label:"Voiding abusif / sans accord", zone:"🟠"},
      {label:"Refus Crash RP sans accord", zone:"🟡"},
      {label:"Poursuite sans raison RP sérieuse", zone:"🟠"},
      {label:"Conduite irréaliste (jumps/sens inverse)", zone:"🟠"},
      {label:"Crashs non joués (NoPain)", zone:"🟡"},
      {label:"Abus de fréquence radio", zone:"🟡"},
      {label:"Rassemblement HRP", zone:"🟠"},
      {label:"Scène prioritaire sans mod", zone:"🟡"},
      {label:"Véhicule exotique sans autorisation WL", zone:"🟠"},
      {label:"Liveries non respectées", zone:"🟡"},
      {label:"Refus de RP sans raison valable", zone:"🟠"},
      {label:"Troll / NITRP", zone:"🟠"},
      {label:"Interférence de scène RP/staff", zone:"🟡"},
      {label:"Metagaming", zone:"🟠"},
      {label:"Corruption RP dans services publics", zone:"🟠"},
      {label:"Avatar irréaliste", zone:"🟠"},
      {label:"GTA driving", zone:"🟠"},
      {label:"Bloquer la route sans raison métier", zone:"🟠"},
      {label:"MTQ: ne laisse pas 1 voie par côté", zone:"🟠"},
      {label:"Abus d’outils (cones/stopsticks/taser…)", zone:"🟠"},
      {label:"Arme incohérente avec rôle", zone:"🟡"},
      {label:"Gun motions", zone:"🟡"},
      {label:"Cuff motions correct (info)", zone:"🟡"},
      {label:"Cuff rush interdit", zone:"🟠"},
      {label:"RDM", zone:"🟠"},
      {label:"RDM en safezone", zone:"🔴"},
      {label:"RDM sur staff", zone:"🔴"},
      {label:"VDM (heurter exprès)", zone:"🟠"},
      {label:"FRP (irréalisme)", zone:"🟠"},
      {label:"Powergaming/FearRP/NoPain", zone:"🟠"},
      {label:"Car surfing", zone:"🟠"},
      {label:"NLR (retour scène après mort)", zone:"🟠"},
      {label:"Partenaires de crime >2 sans perm gang", zone:"🟠"},
      {label:"Gang/Entreprise sans autorisation", zone:"🟠"},
      {label:"TOS Roblox (contenu NSFW/choquant)", zone:"🟠"},
      {label:"Combat log (quitter pour éviter)", zone:"🟠"},
      {label:"Fausse identité (uniforme/véhicule)", zone:"🟠"},
      {label:"Impersonation staff", zone:"🔴"},
      {label:"Évasion staff", zone:"🔴"},
      {label:"Évasion de ban (alt)", zone:"⚫"},
      {label:"Menaces serveur/joueur", zone:"⚫"},
      {label:"Abus staff (mauvais canal)", zone:"🟡"},
      {label:"Musique/soundboard/voice changer", zone:"🟡"},
      {label:"Appel mod inutile", zone:"🟡"},
      {label:"Refus décisions du staff", zone:"🟠"},
      {label:"Manque de respect/harcèlement", zone:"🔴"},
      {label:"Spam/ping/pub sans autorisation", zone:"🟠"},
      {label:"Contenu NSFW ou choquant", zone:"🟠"},
      {label:"Débats HRP", zone:"🟡"},
      {label:"Abus bots/tickets", zone:"🟠"},
      {label:"Usurpation/double compte", zone:"🟠"},
      {label:"DM non sollicités", zone:"🟠"},
      {label:"Mauvais salons", zone:"🟡"},
      {label:"Partage privé sans accord", zone:"🔴"},
      {label:"Contournement sanction", zone:"🔴"},
    ];

    const ZONE_INFO = {
      "🟡": {name:"Zone jaune – Mineure", cls:"y", hint:"2–4 warns"},
      "🟠": {name:"Zone orange – Moyenne", cls:"o", hint:"warn ou kick"},
      "🔴": {name:"Zone rouge – Grave", cls:"r", hint:"kick ou ban (Admin+)"},
      "⚫": {name:"Zone noire – Très grave", cls:"k", hint:"ban ou blacklist (Co-fondateur+)"}
    };

    const ACTIONS = {
      WARN: ["🟡","🟠","🔴"],
      KICK: ["🟠","🔴"],
      BAN:  ["🔴","⚫"],
    };

    const roleSel = document.getElementById('role');
    const search = document.getElementById('search');
    const zonesHost = document.getElementById('zones');
    const tabs = [...document.querySelectorAll('.tab')];
    const toast = document.getElementById('toast');
    let currentAction = 'WARN';

    tabs.forEach(t=>t.addEventListener('click',()=>{
      tabs.forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      currentAction = t.dataset.tab;
      render();
    }));

    roleSel.addEventListener('change', render);
    search.addEventListener('input', render);

    document.getElementById('copyNote').addEventListener('click',()=>{
      const txt = document.getElementById('note').value.trim();
      if(!txt){ return pop("Rien à copier"); }
      copy(txt);
    });

    function isAllowed(zone, role){
      const need = zoneRequirements[zone];
      return roleOrder.indexOf(role) >= roleOrder.indexOf(need);
    }

    function render(){
      const role = roleSel.value;
      const q = search.value.toLowerCase();
      zonesHost.innerHTML = '';

      const zonesToShow = ACTIONS[currentAction];
      zonesToShow.forEach(z => {
        const info = ZONE_INFO[z];
        const sec = document.createElement('section');
        sec.className = 'zone';

        const head = document.createElement('div');
        head.className = 'zonehead';
        const badge = document.createElement('span');
        badge.className = 'badge '+info.cls;
        badge.textContent = z;
        const title = document.createElement('div');
        title.innerHTML = `<b>${info.name}</b> · <span class="need">${info.hint}</span>`;
        head.appendChild(badge); head.appendChild(title);
        sec.appendChild(head);

        const grid = document.createElement('div');
        grid.className = 'reasons';

        RULES.filter(r => r.zone===z && (!q || r.label.toLowerCase().includes(q)))
             .forEach(r => {
               const btn = document.createElement('button');
               btn.className = 'reason';
               const allowed = isAllowed(r.zone, role);
               btn.disabled = !allowed;
               btn.innerHTML = `${r.label} <small>${allowed? 'Cliquer pour copier' : 'Non autorisé pour votre grade'}</small>`;
               btn.addEventListener('click',()=>{
                 if(!allowed) return;
                 const text = `${currentAction} | ${r.label} | ${r.zone}`;
                 copy(text);
               });
               grid.appendChild(btn);
             });

        sec.appendChild(grid);
        zonesHost.appendChild(sec);
      });

      if(currentAction==='WARN'){
        const special = document.createElement('section');
        special.className='zone';
        special.innerHTML = `
          <div class="zonehead"><span class="badge w">⚪</span>
          <div><b>Cas particulier</b> · <span class="need">Un supérieur veut retirer un joueur d’une team → <b>:wanted</b></span></div></div>
          <div class="reasons">
            <button class="reason" id="wantedBtn">Insérer ":wanted"</button>
          </div>`;
        zonesHost.appendChild(special);
        special.querySelector('#wantedBtn').addEventListener('click',()=>copy(':wanted'));
      }
    }

    function copy(text){
      navigator.clipboard.writeText(text).then(()=>pop(`Copié: ${text}`));
    }
    function pop(msg){
      toast.textContent = msg; toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'),1400);
    }

    render();
  </script>
</body>
</html>
